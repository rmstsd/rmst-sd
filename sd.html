<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>sd</title>

    <style>
      .oriimage {
      }

      @keyframes fade-in {
        from {
          opacity: 0;
        }
      }

      @keyframes fade-out {
        to {
          opacity: 0;
        }
      }

      @keyframes slide-from-right {
        from {
          transform: translateX(30px);
        }
      }

      @keyframes slide-to-left {
        to {
          transform: translateX(-30px);
        }
      }

      ::view-transition-old(root) {
        animation: 90ms cubic-bezier(0.4, 0, 1, 1) both fade-out, 300ms cubic-bezier(0.4, 0, 0.2, 1) both slide-to-left;
      }

      ::view-transition-new(root) {
        animation: 210ms cubic-bezier(0, 0, 0.2, 1) 90ms both fade-in,
          300ms cubic-bezier(0.4, 0, 0.2, 1) both slide-from-right;
      }
    </style>
  </head>

  <body>
    <div>
      <!-- <img class="oriimage" src="./assets/avatar-2.png" alt="" style="width: 100px" /> -->
      <div class="oriimage" style="width: 100px; height: 100px; background-color: red"></div>
    </div>
    <script>
      const oriimage = document.querySelector('.oriimage')

      let div = document.createElement('div')

      oriimage.onclick = () => {
        document.startViewTransition(() => {
          oriimage.style.display = 'none'

          div = document.createElement('div')

          div.onclick = () => {
            document.startViewTransition(() => {
              oriimage.style.display = 'block'
              div.remove()
            })
          }

          div.style.background = 'rgba(0,0,0,0.5)'
          div.style.position = 'fixed'
          div.style.inset = 0
          div.style.display = 'flex'
          div.style.justifyContent = 'center'
          div.style.alignItems = 'center'
          document.body.appendChild(div)

          let image2 = document.createElement('div')

          image2.style.width = '80%'
          image2.style.height = '80%'
          image2.style.backgroundColor = 'pink'
          div.appendChild(image2)
        })
      }
    </script>
  </body>
</html>

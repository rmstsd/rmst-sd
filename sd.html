<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>sd</title>

    <style></style>
  </head>

  <body>
    <script>
      function program() {
        const value = { key: 123 }

        // Implicitly propagated via shared reference to an external variable.
        // The value is only available only for the _synchronous execution_ of
        // the try-finally code.
        try {
          shared = value
          implicit()
        } finally {
          shared = undefined
        }
      }

      let shared
      async function implicit() {
        // The shared reference is still set to the correct value.
        console.log(shared.key, 123)

        await 1

        // After awaiting, the shared reference has been reset to `undefined`.
        // We've lost access to our original value.
        console.log(shared.key, 123)
      }

      program()
    </script>
  </body>
</html>

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>zzz</title>

    <style></style>
  </head>

  <body>
    <script>
      const str = `哈哈哈"hjm {get("date")} asd {get("health")} 44 {get("uuu")} 789`

      function hhStr(str) {
        const m = [...str.matchAll(/\{.+?\}/g)]

        const ansArray = []

        function pinjieR(oldStr) {
          return `r'''${oldStr}'''`
        }

        for (let i = 0; i < m.length; i++) {
          const curItem = m[i]
          const nextItem = m[i + 1]

          if (i === 0) {
            ansArray.push(pinjieR(str.slice(0, curItem.index)))
          }

          const curChildStr = curItem[0]
          ansArray.push(curChildStr)

          if (!nextItem) {
            ansArray.push(pinjieR(str.slice(curItem.index + curChildStr.length)))
            break
          }

          ansArray.push(pinjieR(str.slice(curItem.index + curChildStr.length, nextItem.index)))
        }

        console.log(ansArray)

        const ansStr = ansArray.join(' + ')

        console.log(ansStr)

        return ansStr
      }

      //
    </script>
  </body>
</html>

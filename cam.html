<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>my</title>

    <style></style>
  </head>

  <body>
    <canvas width="600" height="600" style="border: 1px solid red"></canvas>

    <script>
      function getRandomHexColor() {
        // 生成 0 到 16777215 之间的随机数（对应 0xffffff）
        const randomNum = Math.floor(Math.random() * 0xffffff)
        // 转成 6 位十六进制字符串，不足补 0
        const hexStr = randomNum.toString(16).padStart(6, '0')
        // 返回完整的十六进制颜色值
        return `#${hexStr}`
      }

      const canvas = document.querySelector('canvas')
      const ctx = canvas.getContext('2d')

      const rects = Array.from({ length: 10_0000 }, () => ({
        x: Math.floor(Math.random() * 600),
        y: Math.floor(Math.random() * 600),
        w: 20,
        h: 20,
        color: getRandomHexColor()
      }))

      rects.forEach(item => {
        ctx.fillStyle = item.color
        ctx.fillRect(item.x, item.y, item.w, item.h)
      })
    </script>
  </body>
</html>

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>sq</title>

    <style></style>
  </head>

  <body>
    <div style="height: 400px; width: 600px; border: 1px solid red"></div>

    <script type="module">
      import { createCanvas } from './createCanvas.js'

      const div = document.querySelector('div')

      let cc = createCanvas(div.clientWidth, div.clientHeight)

      let canvasElement = cc.canvasElement
      let ctx = cc.ctx

      div.append(canvasElement)

      const path2d = new Path2D()
      path2d.moveTo(20, 20)
      path2d.lineTo(100, 20)
      ctx.strokeStyle = 'red'
      // ctx.lineCap = 'square'
      ctx.lineWidth = 1
      ctx.stroke(path2d)

      const path3 = new Path2D()
      path3.moveTo(20, 20)
      path3.lineTo(100, 20)
      ctx.strokeStyle = 'rgba(0,0,0,0.5)'
      ctx.lineWidth = 3
      ctx.lineCap = 'round'
      ctx.stroke(path3)

      canvasElement.addEventListener('click', evt => {
        ctx.lineWidth = 3
        ctx.lineCap = 'round'

        let b = ctx.isPointInStroke(
          path2d,
          evt.offsetX * window.devicePixelRatio,
          evt.offsetY * window.devicePixelRatio
        )
        console.log(b)
      })

      //
    </script>
  </body>
</html>

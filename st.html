<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>st</title>

    <style></style>
  </head>

  <body>
    <script>
      const genDeepData = (curDeep, maxDeep, parentId) => {
        const count = Math.floor(Math.random() * 2 + 3)
        curDeep += 1

        const array = []

        for (let i = 0; i < count; i++) {
          const id = parentId == null ? String(i) : parentId + '-' + i
          array[i] = { id }

          if (curDeep < maxDeep && Math.random() > 0.4) {
            array[i].children = genDeepData(curDeep, maxDeep, id)
          }
        }

        return array
      }

      const tdata = genDeepData(0, 3)
      console.log(tdata)

      const rdata = [
        { id: '0' },
        { id: '1' },
        {
          id: '2',
          children: [
            { id: '2-0' },
            {
              id: '2-1',
              children: [{ id: '2-1-0' }, { id: '2-1-1' }, { id: '2-1-2' }]
            },
            {
              id: '2-2',
              children: [{ id: '2-2-0' }]
            }
          ]
        },
        {
          id: '3'
        }
      ]

      const target = '2-1'

      const ans = getStack(rdata, target)
      console.log(ans)

      function getStack(data, target) {
        const stack = []

        dfs(data)

        return stack

        function dfs(data) {
          for (const item of data) {
            console.log(item.id)

            stack.push(item.id)

            if (stack.at(-1) === target) break
            if (item.children) dfs(item.children)
            if (stack.at(-1) === target) break

            stack.pop()
          }

          return stack
        }
      }

      //
    </script>
  </body>
</html>

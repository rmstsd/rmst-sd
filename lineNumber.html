<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>sd</title>

    <style></style>
  </head>

  <body>
    <script>
      //
      const data = [
        {
          id: '1',
          children: [
            { id: '1-1', children: [{ id: '1-1-1' }, { id: '1-1-2' }, { id: '1-1-3' }] },
            { id: '1-2' },
            { id: '1-3', children: [{ id: '1-3-1' }, { id: '1-3-2' }, { id: '1-3-3' }] }
          ]
        },
        {
          id: '2',
          children: [{ id: '2-1' }, { id: '2-2' }, { id: '2-3' }]
        },
        {
          id: '3',
          children: [{ id: '3-1' }, { id: '3-2' }, { id: '3-3' }]
        }
      ]
      // console.log(count(data))
      // console.log(data)

      console.log(flatList(data))

      function flatList(data) {
        return data.reduce((acc, item) => {
          acc.push(item)

          if (item.children) {
            acc.push(...flatList(item.children))
          }

          return acc
        }, [])
      }

      function count(data) {
        return (
          data.length +
          data.reduce((acc, childItem) => {
            if (childItem.children) {
              const childrenCount = count(childItem.children)

              childItem.count = childrenCount

              return acc + childrenCount
            }

            return acc
          }, 0)
        )
      }

      data[0].index = 0
      function lineNumber(_data) {
        data.forEach(item => {
          if (Reflect.has(item, 'index')) {
            return
          }
        })
      }

      // const ans = postorderRecursion(data[0])
      // console.log(ans)

      // 后序
      function postorderRecursion(root) {
        const ans = []
        loop(root)
        return ans

        function loop(root) {
          if (root == null) return

          if (root.children) {
            root.children.forEach(item => {
              loop(item)
            })
          }

          ans.push(root.id)
        }
      }

      //
    </script>
  </body>
</html>
